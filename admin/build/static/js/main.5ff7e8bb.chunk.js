(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{342:function(e,n,t){},343:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(81),i=t.n(c),o=t(10),s=t(17),u=t(15),l=t.n(u),d=t(24),j=t(3),b=t(4),p=t(31),h=t.n(p);h.a.interceptors.request.use((function(e){var n=localStorage.getItem("token");return e.headers.Authorization="Bearer ".concat(n),e}));var x=function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.data;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f="https://zircus.herokuapp.com/api";function g(e,n){return v.apply(this,arguments)}function v(){return(v=Object(d.a)(l.a.mark((function e(n,t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(f,"/login"),{username:n,password:t}).then(x);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return m.apply(this,arguments)}function m(){return(m=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(f,"/inv")).then(x);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return y.apply(this,arguments)}function y(){return(y=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(f,"/orders")).then(x);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.put("".concat(f,"/orders/").concat(n.id),n).then(x);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("".concat(f,"/orders/").concat(n)).then(x);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return M.apply(this,arguments)}function M(){return(M=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.put("".concat(f,"/inv"),n).then(x);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(f,"/message")).then(x);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("".concat(f,"/message/").concat(n)).then(x);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(f,"/orders/label"),{url:n},{responseType:"blob"}).then(x);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,n,t){var a=Object(r.useState)(n),c=Object(o.a)(a,2),i=c[0],s=c[1];return[{type:e,value:i,onChange:function(e){return s(e.target.value)},placeholder:t},function(){return s(n)}]}var I,N,E,B,q,A,U,R,H=t(1),_=[],V=a.a.createContext(),J=function(e){var n=e.children,t=Object(r.useRef)(null),a=250,c=function(){t.current=new WebSocket("wss://zircus.herokuapp.com"),t.current.onopen=function(){console.debug("Websocket connection open"),a=250},t.current.onmessage=function(e){var n=JSON.parse(e.data);o(n)},t.current.onclose=function(e){switch(e.code){case 1e3:console.debug("Websocket closed normally");break;default:i(a+=a)}},t.current.onerror=function(e){switch(e.code){case"ECONNREFUSED":a=a+=a,i(a);break;default:console.error("Websocket encountered error: ".concat(e))}}},i=function(e){setTimeout(c,Math.min(1e4,e))},o=function(e){console.debug("[Websocket-IncomingMessage] ",e),_.forEach((function(n){return n.messageHandler(e)}))};return Object(H.jsx)(V.Provider,{value:{initializeWebSocket:c,disconnectWebSocket:function(){t.current&&t.current.close(1e3)},addListener:function(e){var n=_.length;return _.push({id:n,messageHandler:e}),n},removeListener:function(e){return _=_.filter((function(n){return n.id!==e}))}},children:n})},K=(V.Consumer,b.a.main(I||(I=Object(j.a)(["\n    width: 100%;\n    display: flex;\n    flex-flow: column nowrap;\n    align-items: center;\n"])))),Z=b.a.form(N||(N=Object(j.a)(["\n    margin-top: var(--lg-spacing);\n    padding: var(--md-spacing);\n    background-color: var(--gray-20);\n    border-radius: var(--big-radius);\n    display: flex;\n    flex-flow: column nowrap;\n    gap: 0.5rem;\n"]))),$=b.a.label(E||(E=Object(j.a)(["\n    display: flex;\n    flex-flow: column nowrap;\n"]))),G=b.a.p(B||(B=Object(j.a)(["\n    color: ",";\n    margin: var(--base-spacing) 0;\n    font-weight: 500;\n"])),(function(e){return e.failedLogin?"var(--red)":"var(--text-color)"})),Q=b.a.button(q||(q=Object(j.a)(["\n    margin-top: 0.5rem;\n"])));function X(e){var n=e.setToken,t=e.setUser,a=Object(r.useState)(!1),c=Object(o.a)(a,2),i=c[0],u=c[1],j=D("text",""),b=Object(o.a)(j,1)[0],p=D("password",""),h=Object(o.a)(p,1)[0],x=Object(r.useContext)(V).initializeWebSocket,f=function(){u(!0),setTimeout((function(){u(!1)}),2e3)},v=function(e){var r=e.name,a=e.token;t(r),n(a),localStorage.setItem("user",r),localStorage.setItem("token",a),x()},O=function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),g(b.value,h.value).then(v).catch(f);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=localStorage.getItem("token"),r=localStorage.getItem("user");e&&n(e),r&&t(r),e&&r&&x()}),[n,t,x]),Object(H.jsx)(K,{children:Object(H.jsxs)(Z,{onSubmit:O,children:[Object(H.jsx)("h1",{children:"Zircus Admin"}),Object(H.jsx)(G,{failedLogin:i,children:i?"Login failed":"Please Log in:"}),Object(H.jsxs)($,{htmlFor:"username",children:[Object(H.jsx)("span",{children:"Username"}),Object(H.jsx)("input",Object(s.a)(Object(s.a)({},b),{},{disabled:!!i}))]}),Object(H.jsxs)($,{htmlFor:"password",children:[Object(H.jsx)("span",{children:"Password"}),Object(H.jsx)("input",Object(s.a)(Object(s.a)({},h),{},{disabled:!!i}))]}),Object(H.jsx)(Q,{className:"button",type:"submit",disabled:!!i,children:i?"Please wait":"Log in"})]})})}function Y(){return Object(H.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(H.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),Object(H.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})}var ee,ne=b.a.header(A||(A=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 4rem;\n    background: var(--dgray-80);\n    padding: var(--base-spacing);\n    z-index: 10;\n    box-shadow: 0px 6px 12px 4px rgba(23, 23, 22, 0.075),\n      0px 3px 6px 1px rgba(22, 22, 21, 0.15);\n"]))),te=b.a.h3(U||(U=Object(j.a)(["\n    color: var(--invert-text-color);\n    font-size: 1.25rem;\n    flex-grow: 1;\n"]))),re=b.a.span(R||(R=Object(j.a)(["\n    display: flex;\n    align-items: center;\n    gap: var(--base-unit);\n    color: var(--gray-10);\n    margin-right: var(--base-spacing);\n\n    svg {\n        height: 1rem;\n    }\n"])));function ae(e){var n=e.text,t=e.logout,r=e.user;return Object(H.jsxs)(ne,{children:[Object(H.jsx)(te,{children:n}),Object(H.jsxs)(re,{children:[Object(H.jsx)(Y,{})," ",r.split(" ")[0]]}),Object(H.jsx)("button",{className:"button light outline",type:"button",onClick:t,children:"logout"})]})}function ce(){return Object(H.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(H.jsx)("polyline",{points:"13 17 18 12 13 7"}),Object(H.jsx)("polyline",{points:"6 17 11 12 6 7"})]})}function ie(){return Object(H.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(H.jsx)("polyline",{points:"11 17 6 12 11 7"}),Object(H.jsx)("polyline",{points:"18 17 13 12 18 7"})]})}function oe(){return Object(H.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(H.jsx)("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),Object(H.jsx)("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),Object(H.jsx)("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),Object(H.jsx)("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),Object(H.jsx)("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),Object(H.jsx)("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})}function se(){return Object(H.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(H.jsx)("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),Object(H.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),Object(H.jsx)("path",{d:"M16 10a4 4 0 0 1-8 0"})]})}function ue(){return Object(H.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(H.jsx)("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),Object(H.jsx)("polyline",{points:"17 6 23 6 23 12"})]})}function le(){return Object(H.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Object(H.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}var de,je,be,pe,he=b.a.button(ee||(ee=Object(j.a)(["\n    flex-grow: 1;\n    display: flex;\n    align-items: center;\n    ","\n    justify-content: ",";\n    ","\n\n    svg {\n        height: 1.25rem;\n    }\n"])),(function(e){return e.showFull&&"gap: calc(var(--base-unit) * 1.5);"}),(function(e){return e.showFull?"left":"center"}),(function(e){return!e.showFull&&"padding: var(--input-padding);"}));function xe(e){var n=e.showFull,t=e.active,r=e.page,a=e.num,c=e.setPage,i=e.children;return Object(H.jsxs)(he,{showFull:n,className:r===t?"button":"button outline",onClick:function(){return c(t)},children:[i,n&&"".concat(t," ").concat(a?"(".concat(a,")"):"")]})}var fe=b.a.nav(de||(de=Object(j.a)(["\n    position: fixed;\n    top: 4rem;\n    left: 0;\n    bottom: 0;\n    z-index: 5;\n    width: ",";\n    border-right: 2px solid var(--gray-30);\n    background-color: var(--gray-10);\n    box-shadow: 3px 0px 6px 0 rgba(23, 23, 22, 0.02), \n      5px 0px 6px 0 rgba(23, 23, 21, 0.057);\n"])),(function(e){return e.showFull?"14rem":"4rem"})),ge=b.a.ul(je||(je=Object(j.a)(["\n    list-style: none;\n    display: flex;\n    gap: var(--base-unit);\n    flex-flow: column nowrap;\n    padding: var(--base-unit) var(--base-unit) 0 var(--base-unit) !important;\n"]))),ve=b.a.li(be||(be=Object(j.a)(["\n    width: 100%;\n    display: flex;\n"]))),Oe=b.a.button(pe||(pe=Object(j.a)(["\n    width: 100%;\n    padding: var(--base-unit);\n    display: flex;\n    justify-content: ",";\n    align-items: center;\n    background: transparent;\n    border: none;\n    outline: none;\n\n    &:hover {\n        background-color: var(--gray-05);\n        cursor: pointer;\n    }\n\n    svg {\n        height: 1.5rem;\n    }\n"])),(function(e){return e.showFull?"flex-end":"center"}));function me(e){var n=e.setPage,t=e.page,r=e.inv,a=e.orders,c=e.showFull,i=e.setShowFull,o=e.messages;return Object(H.jsxs)(fe,{showFull:c,children:[Object(H.jsx)(Oe,{showFull:c,type:"button",onClick:function(){return i(!c)},children:c?Object(H.jsx)(ie,{}):Object(H.jsx)(ce,{})}),Object(H.jsxs)(ge,{children:[Object(H.jsx)(ve,{children:Object(H.jsx)(xe,{showFull:c,page:t,active:"metrics",setPage:n,children:Object(H.jsx)(ue,{})})}),Object(H.jsx)(ve,{children:Object(H.jsx)(xe,{showFull:c,page:t,active:"orders",num:a,setPage:n,children:Object(H.jsx)(se,{})})}),Object(H.jsx)(ve,{children:Object(H.jsx)(xe,{active:"inventory",page:t,showFull:c,num:r,setPage:n,children:Object(H.jsx)(oe,{})})}),Object(H.jsx)(ve,{children:Object(H.jsx)(xe,{active:"messages",page:t,showFull:c,num:o,setPage:n,children:Object(H.jsx)(le,{})})})]})]})}var we,ye,ke,Se,Ce,Le=t(159),Me=t(62),Fe=b.a.label(we||(we=Object(j.a)(["\n    display: flex;\n    align-items: center;\n    gap: var(--base-unit);\n    user-select: none;\n    margin: 0;\n"])));function Pe(e){var n=e.props,t=e.children;return Object(H.jsx)(Fe,Object(s.a)(Object(s.a)({},n),{},{children:t}))}var ze,Te=b.a.li(ye||(ye=Object(j.a)(["\n  display: flex;\n  width: 100%;\n  align-items: center;\n  gap: 2rem;\n  @media screen and (min-width: 1281px) {\n    gap: 3rem;\n  }\n  border-top: 2px solid var(--gray-20);\n  border-left: 2px solid var(--gray-20);\n  border-right: 2px solid var(--gray-20);\n  padding: 1rem;\n  background-color: var(--gray-10);\n\n  &:hover {\n    background-color: var(--gray-05);\n  }\n"]))),We=b.a.img(ke||(ke=Object(j.a)(["\n  max-height: 2rem;\n"]))),De=b.a.p(Se||(Se=Object(j.a)(["\n  font-size: 1rem;\n"]))),Ie=b.a.p(Ce||(Ce=Object(j.a)(["\n  font-weight: 500;\n  ","\n"])),(function(e){return e.grow&&"flex-grow: 1;"}));function Ne(e){var n=e.item,t=e.setInv,r=function(e,r){return function(a){t((function(t){return t.map((function(t){return t.id===n.id?Object(s.a)(Object(s.a)({},t),{},Object(Me.a)({},e,r(a.target))):t}))})),L(Object(s.a)(Object(s.a)({},n),{},Object(Me.a)({},e,r(a.target)))).catch((function(e){return console.log(e)}))}},a=r("quantity",(function(e){return Number(e.value)})),c=r("active",(function(e){return e.checked})),i=r("price",(function(e){return Number(e.value)}));return Object(H.jsxs)(Te,{children:[Object(H.jsx)(We,{src:"https://zircus.netlify.app/".concat(n.images.sm_a),alt:n.name,className:"inventory__item__img"}),Object(H.jsx)(De,{children:n.name.en}),Object(H.jsx)(Ie,{children:n.size}),Object(H.jsx)(Ie,{grow:!0,children:n.color}),Object(H.jsxs)(Pe,{htmlFor:"".concat(n.id,"-price"),children:[Object(H.jsx)(Ie,{children:"price"}),Object(H.jsx)("input",{min:"0",step:"1",size:"5",type:"number",id:"".concat(n.id,"-price"),value:n.price,onChange:i})]}),Object(H.jsxs)(Pe,{htmlFor:"".concat(n.id,"-quantity"),children:[Object(H.jsx)(Ie,{children:"quantity"}),Object(H.jsx)("input",{min:"0",step:"1",size:"5",type:"number",id:"".concat(n.id,"-quantity"),value:n.quantity,onChange:a})]}),Object(H.jsxs)(Pe,{htmlFor:"active",children:[Object(H.jsx)(Ie,{children:"active"}),Object(H.jsx)("input",{type:"checkbox",checked:n.active,onChange:c})]})]})}function Ee(){return Object(H.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon",children:[Object(H.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),Object(H.jsx)("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),Object(H.jsx)("line",{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}),Object(H.jsx)("line",{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}),Object(H.jsx)("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),Object(H.jsx)("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),Object(H.jsx)("line",{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}),Object(H.jsx)("line",{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"})]})}var Be,qe=b.a.main(ze||(ze=Object(j.a)(["\n    overflow-y: scroll;\n    min-height: calc(100vh - 4rem);\n    display: flex;\n    flex-flow: column nowrap;\n    align-items: center;\n    ","\n    ","\n    ","\n    padding-bottom: var(--lg-spacing);\n    background-color: var(--gray-20);\n"])),(function(e){return e.padTop&&"padding-top: var(--base-spacing);"}),(function(e){return e.pad&&"padding-left: var(--base-spacing);"}),(function(e){return e.pad&&"padding-right: var(--base-spacing);"}));function Ae(e){var n=e.children,t=e.padTop,r=e.pad;return Object(H.jsx)(qe,{padTop:t,pad:r,children:n})}var Ue,Re=b.a.ul(Be||(Be=Object(j.a)(["\n    display: flex;\n    flex-flow: column nowrap;\n    max-width: var(--screen-lg);\n    width: 100%;\n    ","\n"])),(function(e){return e.gap?"gap: var(--base-spacing);":""}));function He(e){var n=e.gap,t=e.children;return Object(H.jsx)(Re,{gap:n,children:t})}var _e,Ve,Je,Ke,Ze=b.a.button(Ue||(Ue=Object(j.a)(["\n  padding: var(--base-unit) var(--base-spacing);\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: ",";\n  background-color: ",";\n  border: 2px solid\n    ",";\n  border-radius: var(--radius);\n\n  &:hover,\n  &:focus {\n    cursor: pointer;\n    background-color: ",";\n    color: var(--gray-05);\n  }\n"])),(function(e){return"outline"===e.variant?"var(--dgray-80)":"var(--gray-05)"}),(function(e){return"outline"===e.variant?"transparent":"var(--".concat(e.variant,")")}),(function(e){return"outline"===e.variant?"var(--dgray-80)":"var(--".concat(e.variant,")")}),(function(e){return"outline"===e.variant?"var(--dgray-80)":"var(--".concat(e.variant,")")}));function $e(e){var n=e.attributes,t=e.text,r=e.variant;return Object(H.jsx)(Ze,Object(s.a)(Object(s.a)({},n),{},{variant:r,children:t}))}var Ge=b.a.div(_e||(_e=Object(j.a)(["\n  display: flex;\n  gap: var(--base-spacing);\n"]))),Qe=b.a.div(Ve||(Ve=Object(j.a)(["\n  display: flex;\n  flex-flow: column nowrap;\n  gap: var(--base-unit);\n"]))),Xe=b.a.ul(Je||(Je=Object(j.a)(["\n  display: flex;\n  gap: var(--base-spacing);\n\n  li {\n    margin: var(--base-spacing) 0;\n    }\n  }\n"]))),Ye=b.a.label(Ke||(Ke=Object(j.a)(["\n  display: flex;\n  gap: var(--base-spacing);\n  align-items: center;\n  padding: var(--base-unit);\n  background-color: var(--dgray-80);\n  border-radius: var(--radius);\n  right: var(--base-spacing);\n  bottom: var(--base-unit);\n  position: fixed;\n  box-shadow: var(--box-shadow-sm);\n"])));function en(e){var n=e.inv,t=e.setInv,a=Object(r.useState)(""),c=Object(o.a)(a,2),i=c[0],u=c[1],j=Object(r.useState)(null),b=Object(o.a)(j,2),p=b[0],h=b[1],x=n.filter((function(e){if(!i)return!0;for(var n=0,t=[e.name.en.toLowerCase(),e.prefix,e.size,e.color];n<t.length;n++){if(t[n].includes(i.toLowerCase()))return!0}return!1})),f=n.reduce((function(e,n){return e.hasOwnProperty(n.prefix)||(e[n.prefix]=n.description),e}),{}),g=function(){var e=Object(d.a)(l.a.mark((function e(t,r){var a,c,i,o,u,d,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=!0,c=!1,e.prev=3,o=Object(Le.a)(n.filter((function(e){return e.prefix===t})));case 5:return e.next=7,o.next();case 7:return u=e.sent,a=u.done,e.next=11,u.value;case 11:if(d=e.sent,a){e.next=19;break}return j=d,e.next=16,L(Object(s.a)(Object(s.a)({},j),{},{description:r}));case 16:a=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),c=!0,i=e.t0;case 25:if(e.prev=25,e.prev=26,a||null==o.return){e.next=30;break}return e.next=30,o.return();case 30:if(e.prev=30,!c){e.next=33;break}throw i;case 33:return e.finish(30);case 34:return e.finish(25);case 35:h(null),e.next=41;break;case 38:e.prev=38,e.t1=e.catch(0),console.error(e.t1);case 41:case"end":return e.stop()}}),e,null,[[0,38],[3,21,25,35],[26,,30,34]])})));return function(n,t){return e.apply(this,arguments)}}();return Object(H.jsxs)(Ae,{children:[Object(H.jsx)(Xe,{children:f&&Object.entries(f).map((function(e){var n=Object(o.a)(e,2),t=n[0],r=n[1];return Object(H.jsx)("li",{title:"Edit ".concat(t,"'s description"),children:Object(H.jsx)($e,{attributes:{onClick:function(){return h({prefix:t,description:r})}},text:t,variant:"outline"})})}))}),p&&Object(H.jsxs)(Ge,{children:[Object(H.jsx)("textarea",{value:p.description,onChange:function(e){return h(Object(s.a)(Object(s.a)({},p),{},{description:e.target.value}))}}),Object(H.jsxs)(Qe,{children:[Object(H.jsx)($e,{text:"save",variant:"dgray-80",attributes:{onClick:function(){return g(p.prefix,p.description)}}}),Object(H.jsx)($e,{text:"cancel",variant:"outline",attributes:{onClick:function(){return h(null)}}})]})]}),Object(H.jsx)(Ye,{children:Object(H.jsx)("input",{type:"search",value:i,onChange:function(e){return u(e.target.value)}})}),Object(H.jsxs)(He,{children:[n&&x.map((function(e){return Object(H.jsx)(Ne,{item:e,setInv:t},e.id)})),!n&&Object(H.jsx)("li",{id:"spinner",className:"spinner",children:Object(H.jsx)(Ee,{})})]})]})}var nn,tn,rn,an,cn=t(345),on=t(177),sn=t(349),un=t(174),ln=t(175);function dn(e){var n=e.orders,t=n?n.map((function(e){return{name:e.name,date:new Date(e.createdOn).toLocaleDateString(),total:e.total}})):[];return Object(H.jsxs)(cn.a,{width:500,height:400,data:t,children:[Object(H.jsx)(on.a,{type:"monotone",dataKey:"total",stroke:"#888888"}),Object(H.jsx)(sn.a,{stroke:"#cccccc"}),Object(H.jsx)(un.a,{dataKey:"date"}),Object(H.jsx)(ln.a,{})]})}var jn,bn=b.a.div(nn||(nn=Object(j.a)(["\n    display: flex;\n    ","\n    gap: var(--base-spacing);\n    margin-top: var(--base-spacing);\n    width: 100%;\n    align-items: flex-start;\n    max-width: var(--screen-md);\n"])),(function(e){return e.flow?"flex-flow: ".concat(e.flow,";"):"flex-flow: row wrap;"})),pn=b.a.div(tn||(tn=Object(j.a)(["\n    background-color: var(--gray-10);\n    border-radius: var(--radius);\n    flex-basis: 12rem;\n    flex-grow: 1;\n    display: flex;\n    flex-flow: column nowrap;\n    justify-content: flex-start;\n    overflow: hidden;\n    margin-bottom: var(--lg-spacing);\n    padding-bottom: var(--base-spacing);\n\n    :hover {\n      background-color: var(--gray-05);\n    }\n\n    h3 {\n        background-color: var(--dgray-80);\n        color: var(--gray-10);\n        width: 100%;\n        padding: var(--base-unit) var(--base-spacing);\n        margin-bottom: var(--base-spacing);\n    }\n"]))),hn=b.a.span(rn||(rn=Object(j.a)(["\n    height: 100%;\n    font-size: var(--md-font-size);\n    line-height: 1.8;\n    padding: 0 var(--base-spacing);\n"]))),xn=b.a.ul(an||(an=Object(j.a)(["\n    width: 100%;\n    padding: var(--base-spacing) !important;\n\n    li {\n        display: flex;\n        justify-content: space-between;\n        border-bottom: 1px solid var(--gray-30);\n        padding: var(--base-unit);\n    }\n"])));function fn(e){var n=e.orders,t=e.inv,r=e.messages,a=t&&Object.values(t).flat()||[];return Object(H.jsxs)(Ae,{pad:!0,children:[Object(H.jsxs)(bn,{flow:"row wrap",children:[Object(H.jsxs)(pn,{children:[Object(H.jsx)("h3",{children:"orders"}),Object(H.jsxs)(hn,{children:["pending: ",n&&n.reduce((function(e,n){return n.hasPaid||n.hasShipped?e:e+1}),0)]}),Object(H.jsxs)(hn,{children:["paid: ",n&&n.reduce((function(e,n){return n.hasPaid?e+1:e}),0)]}),Object(H.jsxs)(hn,{children:["shipped: ",n&&n.reduce((function(e,n){return n.hasPaid&&n.hasShipped?e+1:e}),0)]})]}),Object(H.jsxs)(pn,{children:[Object(H.jsx)("h3",{children:"messages"}),Object(H.jsxs)(hn,{children:["total: ",r&&r.length]})]}),Object(H.jsxs)(pn,{children:[Object(H.jsx)("h3",{children:"low stock"}),Object(H.jsx)(xn,{children:a.map((function(e){return e.quantity<5&&Object(H.jsxs)("li",{children:[Object(H.jsx)("span",{children:e.type}),Object(H.jsx)("span",{children:e.quantity})]},e.type)}))})]})]}),Object(H.jsxs)(bn,{flow:"column nowrap",children:[Object(H.jsx)("h2",{children:"Recent Orders"}),Object(H.jsx)(dn,{orders:n})]})]})}var gn,vn=b.a.h3(jn||(jn=Object(j.a)(["\n    font-size: 1.125rem;\n    font-weight: 700;\n    display: block;\n    margin-bottom: var(--base-unit);\n    font-style: normal;\n"])));function On(e){var n=e.children;return Object(H.jsx)(vn,{children:n})}var mn,wn,yn,kn,Sn,Cn=b.a.address(gn||(gn=Object(j.a)(["\n    flex-grow: 1;\n"])));function Ln(e){var n=e.order;return Object(H.jsxs)(Cn,{children:[Object(H.jsx)(On,{children:n.name}),Object(H.jsx)("a",{href:"mailto:".concat(n.email),children:n.email}),Object(H.jsx)("br",{}),Object(H.jsxs)("a",{href:"tel:+1".concat(n.phone.replaceAll(" ","")),children:["+1 ",n.phone]}),Object(H.jsx)("br",{}),n.address.line1,Object(H.jsx)("br",{}),n.address.line2,Object(H.jsx)("br",{}),n.address.city," ",n.address.state,Object(H.jsx)("br",{}),n.address.postalCode.toUpperCase()," ",n.address.country,Object(H.jsx)("br",{})]})}var Mn,Fn,Pn,zn=b.a.p(mn||(mn=Object(j.a)(["\n    margin-top: auto;\n    text-align: right;\n    font-weight: 600;\n"]))),Tn=b.a.img(wn||(wn=Object(j.a)(["\n  width: var(--md-spacing);\n  object-fit: contain;\n"]))),Wn=b.a.div(yn||(yn=Object(j.a)(["\n    display: flex;\n    flex-flow: column nowrap;\n    justify-content: space-between;\n    width: 14rem;\n    border-right: 2px solid var(--gray-20);\n    padding-right: var(--base-spacing);\n"]))),Dn=b.a.li(kn||(kn=Object(j.a)(["\n  display: flex;\n  gap: var(--base-spacing);\n  align-items: center;\n  justify-content: space-between;\n"]))),In=b.a.ul(Sn||(Sn=Object(j.a)(["\n"])));function Nn(e){var n=e.order;return Object(H.jsxs)(Wn,{children:[Object(H.jsx)(In,{children:n.items.map((function(e){return Object(H.jsxs)(Dn,{children:[Object(H.jsx)(Tn,{src:"https://zircus.netlify.app".concat(e.image)}),Object(H.jsxs)("span",{children:[e.type," x",e.quantity]})]},e.type)}))}),Object(H.jsxs)(zn,{children:["total $",n.total.toFixed(2)]})]})}function En(){return Object(H.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(H.jsx)("polyline",{points:"3 6 5 6 21 6"}),Object(H.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})}function Bn(e){var n=e.onClick;return Object(H.jsx)("button",{type:"button",className:"button danger icon-button outline",onClick:n,children:Object(H.jsx)(En,{})})}var qn,An,Un,Rn,Hn=b.a.li(Mn||(Mn=Object(j.a)(["\n  margin: 0 auto;\n  display: flex;\n  gap: var(--base-spacing);\n  padding: var(--base-spacing);\n  width: 100%;\n  background-color: var(--gray-10);\n  border-right: var(--base-unit) solid;\n  border-top: 2px solid var(--gray-30);\n  border-left: 2px solid var(--gray-30);\n  border-bottom: 2px solid var(--gray-30);\n  border-right-color: ",";\n\n  &:hover {\n    background-color: var(--gray-05);\n  }\n"])),(function(e){return e.hasPaid&&e.hasShipped?"var(--green)":e.hasPaid?"var(--yellow)":"var(--gray-30)"})),_n=b.a.div(Fn||(Fn=Object(j.a)(["\n  display: flex;\n  flex-flow: column nowrap;\n  gap: var(--base-unit);\n"]))),Vn=b.a.div(Pn||(Pn=Object(j.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-end;\n  flex-grow: 1;\n"])));function Jn(e){var n=e.order,t=e.setShowModal,r=e.setOrders,a=e.notify,c=function(e){var n=e.error;return a("Error: ".concat(n),"red")&&console.log(n)},i=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:r=e.sent,a=window.URL.createObjectURL(new Blob([r])),(c=document.createElement("a")).href=a,c.setAttribute("download","".concat(n.orderId,".pdf")),document.body.appendChild(c),c.click(),c.remove();case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(H.jsxs)(Hn,{hasPaid:n.hasPaid,hasShipped:n.hasShipped,children:[Object(H.jsx)(Nn,{order:n}),Object(H.jsx)(Ln,{order:n}),Object(H.jsxs)(_n,{children:[Object(H.jsx)(On,{children:new Date(n.createdOn).toLocaleString("en-US")}),Object(H.jsxs)(Pe,{children:["paid:",Object(H.jsx)("input",{type:"checkbox",checked:n.hasPaid,onChange:function(){t({heading:"Confirm status change",text:"Change ".concat(n.name,"'s order status to ").concat(n.hasPaid?"not paid":"paid","?'"),color:n.hasPaid?"danger":"positive",btnText:"Change",ok:function(e){e&&(r((function(e){return e.map((function(e){return e.id===n.id?Object(s.a)(Object(s.a)({},e),{},{hasPaid:!e.hasPaid}):e}))})),k({id:n.id,updatedAttributes:{hasPaid:!n.hasPaid}}).catch((function(e){return console.log(e)})))}})}})]}),Object(H.jsxs)(Pe,{children:["shipped:",Object(H.jsx)("input",{type:"checkbox",checked:n.hasShipped,onChange:function(){t({heading:"Confirm status change",text:"Change ".concat(n.name,"'s order status to ").concat(n.hasShipped?"not shipped":"shipped","?'"),color:n.hasShipped?"danger":"positive",btnText:"Change",ok:function(e){e&&(r((function(e){return e.map((function(e){return e.id===n.id?Object(s.a)(Object(s.a)({},e),{},{hasShipped:!e.hasShipped}):e}))})),k({id:n.id,updatedAttributes:{hasShipped:!n.hasShipped}}).catch((function(e){return console.log(e)})))}})}})]}),Object(H.jsx)(Pe,{children:Object(H.jsx)("button",{type:"button",className:"button",onClick:function(){return i(n.shipping.shipment.label)},children:"get label"})}),Object(H.jsx)(Vn,{children:Object(H.jsx)(Bn,{onClick:function(){t({heading:"Confirm deletion",text:"Delete ".concat(n.name,"'s order?'"),color:"danger",btnText:"Delete",ok:function(e){e&&function(e){return C.apply(this,arguments)}(n.id).catch(c)}})}})})]})]})}function Kn(){return Object(H.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Object(H.jsx)("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})})}var Zn,$n,Gn,Qn,Xn,Yn=b.a.div(qn||(qn=Object(j.a)(["\n    padding: var(--base-unit) calc(var(--base-unit) * 2);\n    background-color: var(--dgray-90);\n    border-radius: var(--radius);\n    display: flex;\n    align-items: center;\n    justify-content: space-evenly;\n    gap: var(--base-spacing);\n    height: 3rem;\n    color: var(--gray-10);\n    box-shadow: var(--box-shadow-sm);\n"]))),et=b.a.div(An||(An=Object(j.a)(["\n    display: flex;\n    gap: var(--base-spacing);\n"]))),nt=b.a.button(Un||(Un=Object(j.a)(["\n  background: var(--dgray-80);\n  border-radius: var(--radius);\n  color: var(--gray-10);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  width: 3rem;\n  height: 3rem;\n  cursor: pointer;\n  box-shadow: var(--box-shadow-sm);\n\n  :hover {\n    background-color: var(--dgray-50);\n  }\n\n  svg {\n    padding: var(--base-unit);\n  }\n"]))),tt=b.a.div(Rn||(Rn=Object(j.a)(["\n    position: fixed;\n    right: calc(var(--base-spacing) + 15px);\n    bottom: var(--base-spacing);\n    display: flex;\n    align-items: center;\n    gap: var(--base-unit);\n"])));function rt(e){var n=e.filters,t=e.dateStart,a=e.dateEnd,c=Object(r.useState)(!1),i=Object(o.a)(c,2),u=i[0],l=i[1];return Object(H.jsxs)(tt,{children:[Object(H.jsx)(nt,{onClick:function(){return l((function(e){return!e}))},title:"Show / hide filters",children:Object(H.jsx)(Kn,{})}),u&&Object(H.jsxs)(Yn,{children:[Object(H.jsxs)(Pe,{htmlFor:"dateStart",children:[Object(H.jsx)("span",{children:"date start"}),Object(H.jsx)("input",Object(s.a)(Object(s.a)({},t),{},{id:"dateStart"}))]}),Object(H.jsxs)(Pe,{htmlFor:"dateEnd",children:[Object(H.jsx)("span",{children:"date end"}),Object(H.jsx)("input",Object(s.a)(Object(s.a)({},a),{},{id:"dateEnd"}))]}),Object(H.jsx)(et,{children:n&&n.map((function(e,n){return Object(H.jsxs)(Pe,{htmlFor:"filter-".concat(n),active:e.active,children:[e.text,Object(H.jsx)("input",{checked:e.active,onChange:e.setActive,type:"checkbox",id:"filter-".concat(n)})]},e.text)}))})]})]})}function at(e){var n=e.orders,t=e.setShowModal,a=e.setOrders,c=e.notify,i=D("date",""),s=Object(o.a)(i,1)[0],u=D("date",""),l=Object(o.a)(u,1)[0],d=Object(r.useState)(!1),j=Object(o.a)(d,2),b=j[0],p=j[1],h=Object(r.useState)(!0),x=Object(o.a)(h,2),f=x[0],g=x[1],v=[{active:b,text:"shipped",setActive:function(){return p((function(e){return!e}))}},{active:f,text:"paid",setActive:function(){return g((function(e){return!e}))}}],O=n&&n.filter((function(e){return e.hasPaid===f})).filter((function(e){return e.hasShipped===b})).filter((function(e){var n=s.value,t=l.value;if(!n&&!t)return!0;var r=new Date(e.createdOn).getTime();return n?t?r>=new Date(n).getTime()&&r<=new Date(t).getTime():r>=new Date(n).getTime():r<=new Date(t).getTime()}));return Object(H.jsxs)(Ae,{padTop:!0,children:[Object(H.jsx)(rt,{filters:v,dateStart:s,dateEnd:l}),Object(H.jsx)(He,{gap:!0,children:n&&O.map((function(e){return Object(H.jsx)(Jn,{notify:c,order:e,setShowModal:t,setOrders:a},e.id)}))})]})}var ct,it,ot=b.a.li(Zn||(Zn=Object(j.a)(["\n  margin: 0 auto;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n  gap: var(--md-spacing);\n  padding: var(--base-spacing);\n  width: 100%;\n  background-color: var(--gray-10);\n  border: 2px solid var(--gray-30);\n\n  &:hover {\n    background-color: var(--gray-05);\n  }\n"]))),st=b.a.div($n||($n=Object(j.a)(["\n  display: flex;\n  max-width: 22vw;\n  width: 100%;\n  flex-flow: column nowrap;\n"]))),ut=b.a.div(Gn||(Gn=Object(j.a)(["\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: flex-end;\n  align-items: flex-end;\n  flex-grow: 1;\n"]))),lt=b.a.p(Qn||(Qn=Object(j.a)(["\n  max-width: 75ch;\n  width: 100%;\n"]))),dt=b.a.a(Xn||(Xn=Object(j.a)(["\n  text-decoration: none;\n  padding: var(--base-unit);\n  color: var(--link);\n\n  &:hover,\n  &:focus {\n    text-decoration: none !important;\n    color: var(--link-hover);\n  }\n"])));function jt(e){var n=e.message,t=e.setShowModal,a=e.setMessages,c=e.notify,i=Object(r.useState)(!1),s=Object(o.a)(i,2),u=s[0],l=s[1],d=function(e){var t=e.response;a((function(e){return e.filter((function(e){return e.id!==n.id}))})),c("".concat(t,": Deleted ").concat(n.name,"'s message"),"red")},j=function(e){var n=e.error;return c("".concat(n),"red")},b=function(){t({heading:"Confirm deletion",text:"Delete ".concat(n.name,"'s message?'"),color:"danger",btnText:"Delete",ok:function(e){e&&function(e){return z.apply(this,arguments)}(n.id).then(d).catch(j)}})};return Object(H.jsxs)(ot,{children:[Object(H.jsxs)(st,{children:[Object(H.jsx)(On,{children:n.name}),Object(H.jsx)("a",{href:"mailto:".concat(n.email),children:n.email})]}),Object(H.jsxs)(lt,{children:[u?n.message:n.message.substring(0,140),n.message.length>140&&Object(H.jsx)(dt,{href:"#",onClick:function(){return l((function(e){return!e}))},children:u?"(less)":"... (more)"})]}),Object(H.jsx)(ut,{children:Object(H.jsx)(Bn,{onClick:function(){return b()}})})]})}function bt(e){var n=e.messages,t=e.setShowModal,r=e.setMessages,a=e.notify;return Object(H.jsx)(Ae,{children:Object(H.jsx)(He,{gap:!0,children:n&&n.map((function(e){return Object(H.jsx)(jt,{notify:a,setMessages:r,message:e,setShowModal:t},e.id)}))})})}var pt,ht=b.a.div(ct||(ct=Object(j.a)(["\n    position: fixed;\n    top: calc(var(--base-unit) + 4rem);\n    right: calc(var(--base-unit) + 15px); // for scrollbar\n    width: 22rem;\n    background-color: ","\n    z-index: 100;\n    border-radius: var(--radius);\n    opacity: 0.95;\n    box-shadow: var(--box-shadow-sm);\n    animation: 0.2s ease-out forwards fadeDown;\n"])),(function(e){return"red"===e.look?"var(--red);":"green"===e.look?"var(--green);":"var(--gray-30);"})),xt=b.a.p(it||(it=Object(j.a)(["\n    color: var(--gray-20);\n    margin: var(--base-spacing);\n    font-size: var(--small-font-size);\n    font-weight: 600;\n"])));function ft(e){var n=e.notification;return Object(H.jsx)(ht,{look:n.style,children:Object(H.jsx)(xt,{children:n.text})})}var gt,vt,Ot,mt,wt,yt,kt=b.a.div(pt||(pt=Object(j.a)(["\n  display: flex;\n  flex-flow: column nowrap;\n  padding-top: 4rem;\n  padding-left: ",";\n  height: 100vh;\n  overflow: hidden;\n"])),(function(e){return e.showFull?"14rem":"4rem"}));function St(e){var n=e.inv,t=e.orders,a=e.setShowModal,c=e.logout,i=e.setOrders,s=e.setInv,u=e.user,l=e.messages,d=e.setMessages,j=e.notify,b=e.notification,p=Object(r.useState)("metrics"),h=Object(o.a)(p,2),x=h[0],f=h[1],g=Object(r.useState)(!0),v=Object(o.a)(g,2),O=v[0],m=v[1],w=t?t.length:0,y=l?l.length:0,k=n?function(e,n){return e.reduce((function(e,t){return e+n(t)}),0)}(n,(function(e){return e.quantity})):0;return Object(H.jsxs)(kt,{showFull:O,children:[Object(H.jsx)(ae,{text:"Zircus Admin Dashboard",logout:c,user:u}),Object(H.jsx)(me,{page:x,setPage:f,orders:w,inv:k,showFull:O,setShowFull:m,messages:y}),b&&Object(H.jsx)(ft,{notification:b}),"inventory"===x&&Object(H.jsx)(en,{inv:n,setShowModal:a,setInv:s}),"orders"===x&&Object(H.jsx)(at,{orders:t,setShowModal:a,setOrders:i,notify:j}),"metrics"===x&&Object(H.jsx)(fn,{orders:t,setShowModal:a,inv:n,messages:l}),"messages"===x&&Object(H.jsx)(bt,{messages:l,setMessages:d,setShowModal:a,notify:j})]})}var Ct=b.a.div(gt||(gt=Object(j.a)(["\n  ",";\n"])),(function(e){return e.showModal&&"filter: blur(0.25rem)"})),Lt=b.a.div(vt||(vt=Object(j.a)(["\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  left: 0;\n  position: fixed;\n"]))),Mt=b.a.section(Ot||(Ot=Object(j.a)(["\n  position: fixed;\n  display: flex;\n  flex-flow: column nowrap;\n  gap: 1rem;\n  backgroud-color: var(--gray-90);\n  top: calc(25%);\n  left: calc(50% - 15rem);\n  width: 30rem;\n  min-height: 15rem;\n  background-color: var(--gray-10);\n  border-radius: var(--big-radius);\n  border: 2px solid var(--dgray-90);\n  padding: var(--base-spacing);\n"]))),Ft=b.a.p(mt||(mt=Object(j.a)(["\n  flex-grow: 1;\n"]))),Pt=b.a.div(wt||(wt=Object(j.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  width: 100%;\n  gap: 1rem;\n"]))),zt=b.a.button(yt||(yt=Object(j.a)(["\n  flex-grow: 1;\n"])));function Tt(e){var n=e.children,t=e.showModal,a=e.setShowModal,c=Object(r.useRef)();return Object(r.useEffect)((function(){t&&c.current.focus()})),Object(H.jsxs)("div",{children:[Object(H.jsxs)(Ct,{showModal:t,children:[n,t&&Object(H.jsx)(Lt,{})]}),t&&Object(H.jsxs)(Mt,{children:[Object(H.jsx)("h2",{children:t.heading}),Object(H.jsx)(Ft,{children:t.text}),Object(H.jsxs)(Pt,{children:[Object(H.jsx)(zt,{className:"".concat(t.color," button"),type:"button",onClick:function(){t.ok(!0),a(null)},children:t.btnText||"Ok"}),Object(H.jsx)(zt,{className:"button outline",type:"button",onClick:function(){t.ok(!1),a(null)},ref:c,children:"Cancel"})]})]})]})}var Wt=function(){var e=Object(r.useState)(null),n=Object(o.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(null),i=Object(o.a)(c,2),s=i[0],u=i[1],l=Object(r.useState)([]),d=Object(o.a)(l,2),j=d[0],b=d[1],p=Object(r.useState)(null),h=Object(o.a)(p,2),x=h[0],f=h[1],g=Object(r.useState)(null),v=Object(o.a)(g,2),m=v[0],y=v[1],k=Object(r.useState)(null),S=Object(o.a)(k,2),C=S[0],L=S[1],M=Object(r.useState)(null),P=Object(o.a)(M,2),z=P[0],T=P[1],W=Object(r.useState)(-1),D=Object(o.a)(W,2),I=D[0],N=D[1],E=Object(r.useContext)(V),B=E.addListener,q=E.removeListener,A=function(e){var n=e.text,t=e.color;_(n,t),O().then((function(e){return b(e)})).catch((function(){return b([])})),w().then((function(e){return y(e)})).catch((function(){return y(null)}))},U=function(){var e=B((function(e){if(s)switch(e.type){case"message":return function(e){var n=e.text,t=e.color;_(n,t),F().then((function(e){return f(e.messages)})).catch((function(){return f(null)}))}({text:"New message from ".concat(e.data.name),color:"green"});case"pending order":return A({text:"Pending order from ".concat(e.data.name),color:"gray"});case"paid order":return A({text:"Paid order from ".concat(e.data.name),color:"green"});case"deleted order":return A({text:"".concat(e.data.response,": Inventory updated"),color:"green"});default:console.error("Unknown message type: ".concat(e.type))}}));N(e)},R=function(){q(I),N(-1)},_=function(e,n){z&&z.self&&clearTimeout(z.self);var t=setTimeout((function(){return T(null)}),4500);T({text:e,style:n,self:t})};return Object(r.useEffect)((function(){return O().then((function(e){return b(e)})).catch((function(){return b([])})),null!==s&&(w().then((function(e){y(e)})).catch((function(){return y(null)})),F().then((function(e){return f(e.messages)})).catch((function(){return f(null)}))),U(),R}),[b,s]),Object(H.jsx)(Tt,{showModal:C,setShowModal:L,children:s?Object(H.jsx)(St,{notification:z,notify:_,inv:j,orders:m,logout:function(){a(null),u(null),localStorage.removeItem("user"),localStorage.removeItem("token")},setShowModal:L,setOrders:y,setInv:b,user:t,messages:x,setMessages:f}):Object(H.jsx)(X,{setUser:a,setToken:u})})};t(342);i.a.render(Object(H.jsx)(a.a.StrictMode,{children:Object(H.jsx)(J,{children:Object(H.jsx)(Wt,{})})}),document.getElementById("root"))}},[[343,1,2]]]);
//# sourceMappingURL=main.5ff7e8bb.chunk.js.map